<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>QCM Maths ‚Äì G-Cours</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
  --marine: #0b1c2d;
  --gold: #c9a24d;
  --light: #f4f6f9;
}

body {
  margin: 0;
  font-family: "Segoe UI", Arial, sans-serif;
  background: var(--light);
  color: var(--marine);
}

nav {
  background: var(--marine);
  padding: 15px;
  text-align: center;
}

nav a {
  color: white;
  margin: 0 15px;
  text-decoration: none;
  font-weight: 600;
}

nav a.active {
  color: var(--gold);
}

.container {
  max-width: 900px;
  margin: 40px auto;
  background: white;
  padding: 30px;
  border-radius: 14px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.08);
}

h1 {
  text-align: center;
}

select, input {
  width: 100%;
  padding: 14px;
  margin: 12px 0;
  border-radius: 10px;
  border: 1.5px solid #ccd5df;
}

.choice {
  background: #f5f7fa;
  padding: 14px;
  margin: 10px 0;
  border-radius: 10px;
  cursor: pointer;
}

.choice:hover {
  background: #eaf0f6;
}

.choice.selected {
  border: 2px solid var(--gold);
  background: #fff8eb;
}

button {
  margin-top: 20px;
  padding: 12px 22px;
  border-radius: 999px;
  border: none;
  cursor: pointer;
  background: var(--marine);
  color: white;
  font-weight: bold;
}

button:hover {
  background: var(--gold);
  color: var(--marine);
}

#timer {
  margin-top: 10px;
  font-weight: bold;
}

footer {
  margin-top: 60px;
  background: var(--marine);
  color: white;
  text-align: center;
  padding: 18px;
}
</style>
</head>

<body>

<nav>
  <a href="index.html">Accueil</a>
  <a href="reservation.html">R√©servation</a>
  <a href="a-propos.html">√Ä propos</a>
  <a href="tarifs.html">Tarifs</a>
  <a href="qcm-maths.html" class="active">QCM Maths</a>
</nav>

<div class="container">

<h1>QCM Maths ‚Äì G-Cours</h1>

<input id="studentName" placeholder="Nom de l'√©l√®ve">

<select id="levelSelect">
  <option value="">Choisir une classe</option>
  <option value="6e">6e</option>
  <option value="5e">5e</option>
  <option value="4e">4e</option>
  <option value="3e">3e</option>
  <option value="seconde">Seconde</option>
  <option value="premiere">Premi√®re</option>
  <option value="terminale">Terminale</option>
</select>

<button id="examBtn" style="display:none;">Mode Examen</button>

<div id="timer"></div>
<div id="quiz"></div>

<button id="nextBtn" style="display:none;">Question suivante</button>

<div id="result"></div>

<hr style="margin:30px 0;">
<h2>üìä Mes derniers scores</h2>
<button onclick="loadMyScores()">Voir mes r√©sultats</button>
<div id="history"></div>

<hr style="margin:40px 0;">
<h2>üîê Acc√®s Prof</h2>
<button onclick="openProf()">Connexion Prof</button>
<div id="profPanel"></div>

</div>

<footer>
¬© 2026 ‚Äì G-Cours | QCM Maths
</footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, addDoc, collection, getDocs, query, where, deleteDoc, doc } 
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCDJRbeW9KWrLzuI3v2kBUDulKcb3REKy8",
  authDomain: "reservation-cour.firebaseapp.com",
  projectId: "reservation-cour",
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);


// =====================
// BANQUES QUESTIONS (50 PAR CLASSE)
// =====================

const banks = {

"6e": [
{ q: "Quel est le plus grand ?", choices: ["245","254","244","250"], answer: 1 },
{ q: "8 + 5 = ?", choices: ["12","13","14","15"], answer: 1 },
{ q: "14 ‚àí 6 = ?", choices: ["7","8","9","6"], answer: 1 },
{ q: "7 √ó 3 = ?", choices: ["20","21","24","18"], answer: 1 },
{ q: "20 √∑ 4 = ?", choices: ["4","5","6","3"], answer: 1 },
{ q: "1/2 de 18 = ?", choices: ["7","8","9","10"], answer: 2 },
{ q: "Plus grand nombre ?", choices: ["312","321","231","213"], answer: 1 },
{ q: "15 + 9 = ?", choices: ["22","23","24","25"], answer: 2 },
{ q: "6 √ó 6 = ?", choices: ["30","32","36","40"], answer: 2 },
{ q: "18 ‚àí 7 = ?", choices: ["9","10","11","12"], answer: 2 },
{ q: "25 √∑ 5 = ?", choices: ["4","5","6","7"], answer: 1 },
{ q: "Double de 9 ?", choices: ["16","17","18","19"], answer: 2 },
{ q: "Moiti√© de 40 ?", choices: ["15","20","25","30"], answer: 1 },
{ q: "10 + 14 = ?", choices: ["22","24","25","26"], answer: 1 },
{ q: "9 √ó 4 = ?", choices: ["32","34","36","38"], answer: 2 },
{ q: "17 ‚àí 9 = ?", choices: ["6","7","8","9"], answer: 2 },
{ q: "30 √∑ 6 = ?", choices: ["4","5","6","7"], answer: 1 },
{ q: "Triple de 5 ?", choices: ["10","12","15","20"], answer: 2 },
{ q: "1/4 de 20 = ?", choices: ["4","5","6","7"], answer: 1 },
{ q: "19 + 8 = ?", choices: ["26","27","28","29"], answer: 1 },
{ q: "8 √ó 7 = ?", choices: ["54","56","58","60"], answer: 1 },
{ q: "13 ‚àí 4 = ?", choices: ["7","8","9","10"], answer: 2 },
{ q: "16 √∑ 2 = ?", choices: ["6","7","8","9"], answer: 2 },
{ q: "Double de 12 ?", choices: ["20","22","24","26"], answer: 2 },
{ q: "Moiti√© de 50 ?", choices: ["20","25","30","35"], answer: 1 },
{ q: "11 + 9 = ?", choices: ["18","19","20","21"], answer: 2 },
{ q: "7 √ó 5 = ?", choices: ["30","35","40","45"], answer: 1 },
{ q: "22 ‚àí 6 = ?", choices: ["14","15","16","17"], answer: 2 },
{ q: "24 √∑ 3 = ?", choices: ["6","7","8","9"], answer: 2 },
{ q: "Triple de 4 ?", choices: ["10","12","14","16"], answer: 1 },
{ q: "1/2 de 16 = ?", choices: ["6","7","8","9"], answer: 2 },
{ q: "14 + 7 = ?", choices: ["20","21","22","23"], answer: 1 },
{ q: "6 √ó 9 = ?", choices: ["52","54","56","58"], answer: 1 },
{ q: "18 ‚àí 5 = ?", choices: ["11","12","13","14"], answer: 2 },
{ q: "36 √∑ 6 = ?", choices: ["5","6","7","8"], answer: 1 },
{ q: "Double de 15 ?", choices: ["25","30","35","40"], answer: 1 },
{ q: "Moiti√© de 60 ?", choices: ["20","25","30","35"], answer: 2 },
{ q: "9 + 12 = ?", choices: ["19","20","21","22"], answer: 2 },
{ q: "8 √ó 8 = ?", choices: ["60","62","64","66"], answer: 2 },
{ q: "20 ‚àí 9 = ?", choices: ["9","10","11","12"], answer: 2 },
{ q: "28 √∑ 4 = ?", choices: ["6","7","8","9"], answer: 1 },
{ q: "Triple de 6 ?", choices: ["12","18","24","30"], answer: 1 },
{ q: "1/5 de 25 = ?", choices: ["4","5","6","7"], answer: 1 },
{ q: "16 + 9 = ?", choices: ["24","25","26","27"], answer: 1 },
{ q: "7 √ó 8 = ?", choices: ["54","56","58","60"], answer: 1 },
{ q: "21 ‚àí 7 = ?", choices: ["12","13","14","15"], answer: 2 },
{ q: "40 √∑ 5 = ?", choices: ["6","7","8","9"], answer: 2 },
{ q: "Double de 14 ?", choices: ["24","26","28","30"], answer: 2 },
{ q: "Moiti√© de 70 ?", choices: ["30","35","40","45"], answer: 1 },

],

"5e": [
{ q:"3¬≤ =", choices:["6","9","12"], answer:1 },
{ q:"7 √ó 8 =", choices:["54","56","64"], answer:1 },
{ q:"120 √∑ 6 =", choices:["18","20","22"], answer:1 },
{ q:"2/5 de 50 =", choices:["20","25","30"], answer:0 },
{ q:"45 + 38 =", choices:["83","80","78"], answer:0 },
{ q: "3¬≤ = ?", choices: ["6","9","12","15"], answer: 1 },
{ q: "2,5 + 1,5 = ?", choices: ["3","4","5","4,5"], answer: 1 },
{ q: "12 √ó 0,5 = ?", choices: ["5","6","8","10"], answer: 1 },
{ q: "18/24 simplifi√© =", choices: ["6/8","3/4","9/12","2/5"], answer: 1 },
{ q: "Angle droit =", choices: ["45¬∞","90¬∞","180¬∞","360¬∞"], answer: 1 },
{ q: "3¬≤ = ?", choices: ["6","9","12","15"], answer: 1 },
{ q: "5¬≤ = ?", choices: ["10","20","25","30"], answer: 2 },
{ q: "2,5 + 1,5 = ?", choices: ["3","4","4,5","5"], answer: 1 },
{ q: "7 √ó 8 = ?", choices: ["54","56","58","60"], answer: 1 },
{ q: "18 √∑ 3 = ?", choices: ["5","6","7","8"], answer: 1 },
{ q: "Simplifier 12/16", choices: ["3/4","6/8","2/3","4/5"], answer: 0 },
{ q: "Angle droit =", choices: ["45¬∞","90¬∞","180¬∞","360¬∞"], answer: 1 },
{ q: "Perim√®tre carr√© c√¥t√© 5", choices: ["15","20","25","30"], answer: 1 },
{ q: "Aire rectangle 6√ó4", choices: ["20","22","24","26"], answer: 2 },
{ q: "1/2 de 30", choices: ["10","15","20","25"], answer: 1 },

{ q: "12 + 18 = ?", choices: ["28","30","32","34"], answer: 1 },
{ q: "20 ‚àí 9 = ?", choices: ["9","10","11","12"], answer: 2 },
{ q: "6 √ó 9 = ?", choices: ["52","54","56","58"], answer: 1 },
{ q: "24 √∑ 6 = ?", choices: ["3","4","5","6"], answer: 1 },
{ q: "7¬≤ = ?", choices: ["42","49","54","56"], answer: 1 },
{ q: "15/20 simplifi√© =", choices: ["3/4","4/5","2/3","5/6"], answer: 0 },
{ q: "5 + 3 √ó 4 = ?", choices: ["20","17","22","32"], answer: 1 },
{ q: "Angle plat =", choices: ["90¬∞","180¬∞","270¬∞","360¬∞"], answer: 1 },
{ q: "Aire carr√© c√¥t√© 7", choices: ["42","49","56","64"], answer: 1 },
{ q: "Double de 14", choices: ["24","26","28","30"], answer: 2 },

{ q: "18 + 7 = ?", choices: ["24","25","26","27"], answer: 1 },
{ q: "30 ‚àí 8 = ?", choices: ["20","21","22","23"], answer: 2 },
{ q: "8 √ó 7 = ?", choices: ["54","56","58","60"], answer: 1 },
{ q: "36 √∑ 9 = ?", choices: ["2","3","4","5"], answer: 2 },
{ q: "9¬≤ = ?", choices: ["72","81","90","99"], answer: 1 },
{ q: "R√©duire 20/25", choices: ["4/5","2/5","5/4","1/2"], answer: 0 },
{ q: "6 √ó (2 + 3) = ?", choices: ["30","20","25","18"], answer: 0 },
{ q: "Angle aigu <", choices: ["90¬∞","180¬∞","45¬∞","360¬∞"], answer: 2 },
{ q: "Aire rectangle 9√ó3", choices: ["21","27","30","32"], answer: 1 },
{ q: "Triple de 8", choices: ["16","24","32","48"], answer: 1 },

{ q: "25 + 14 = ?", choices: ["38","39","40","41"], answer: 1 },
{ q: "40 ‚àí 15 = ?", choices: ["20","25","30","35"], answer: 1 },
{ q: "9 √ó 6 = ?", choices: ["52","54","56","58"], answer: 1 },
{ q: "42 √∑ 7 = ?", choices: ["5","6","7","8"], answer: 2 },
{ q: "11¬≤ = ?", choices: ["100","121","132","144"], answer: 1 },
{ q: "Simplifier 14/21", choices: ["2/3","3/4","5/6","7/8"], answer: 0 },
{ q: "7 √ó (4 + 2) = ?", choices: ["42","28","36","32"], answer: 0 },
{ q: "Angle obtus >", choices: ["90¬∞","45¬∞","180¬∞","360¬∞"], answer: 2 },
{ q: "Aire carr√© c√¥t√© 10", choices: ["90","100","110","120"], answer: 1 },
{ q: "Moiti√© de 90", choices: ["30","45","50","60"], answer: 1 },
{ q: "Simplifier 18/24", choices: ["3/4","6/8","9/12","2/3"], answer: 0 },
{ q: "5 + 3 √ó 4 = ?", choices: ["20","17","32","27"], answer: 1 },
{ q: "Aire d‚Äôun rectangle 7 √ó 5 =", choices: ["30","35","40","45"], answer: 1 },
{ q: "Un angle obtus mesure :", choices: ["45¬∞","90¬∞","120¬∞","180¬∞"], answer: 2 },
{ q: "2,4 + 3,6 = ?", choices: ["5","6","6,2","6,5"], answer: 1 },
{ q: "3¬≤ + 4¬≤ = ?", choices: ["25","49","20","18"], answer: 0 },
{ q: "Quelle fraction est la plus grande ?", choices: ["1/3","2/5","3/4","5/8"], answer: 2 },
],

"4e": [
{ q:"R√©soudre : x + 5 = 12", choices:["7","17","5"], answer:0 },
{ q:"Aire d‚Äôun carr√© c√¥t√© 6 =", choices:["12","36","18"], answer:1 },
{ q:"5(2x) =", choices:["10x","7x","5x"], answer:0 },
{ q:"(-3) √ó 4 =", choices:["-12","12","-7"], answer:0 },
{ q:"Racine de 81 =", choices:["9","8","7"], answer:0 },
{ q: "x + 7 = 15 ‚Üí x = ?", choices: ["6","7","8","9"], answer: 2 },
{ q: "4¬≥ = ?", choices: ["16","48","64","12"], answer: 2 },
{ q: "‚àö36 = ?", choices: ["5","6","7","8"], answer: 1 },
{ q: "Aire rectangle 6√ó3 =", choices: ["9","18","20","24"], answer: 1 },
{ q: "4 stylos = 8‚Ç¨, 6 stylos = ?", choices: ["10‚Ç¨","12‚Ç¨","14‚Ç¨","16‚Ç¨"], answer: 1 },
{ q: "x + 5 = 12 ‚Üí x = ?", choices: ["5","6","7","8"], answer: 2 },
{ q: "4¬≥ = ?", choices: ["16","48","64","128"], answer: 2 },
{ q: "‚àö25 = ?", choices: ["4","5","6","7"], answer: 1 },
{ q: "Aire rectangle 8√ó5", choices: ["35","40","45","50"], answer: 1 },
{ q: "Proportion : 5 stylos = 10‚Ç¨, 3 stylos = ?", choices: ["4‚Ç¨","5‚Ç¨","6‚Ç¨","7‚Ç¨"], answer: 2 },

{ q: "2x = 14 ‚Üí x = ?", choices: ["5","6","7","8"], answer: 2 },
{ q: "5¬≥ = ?", choices: ["25","125","75","150"], answer: 1 },
{ q: "‚àö49 = ?", choices: ["6","7","8","9"], answer: 1 },
{ q: "Aire triangle base 10 hauteur 6", choices: ["30","40","50","60"], answer: 0 },
{ q: "12/18 simplifi√© =", choices: ["2/3","3/4","4/5","5/6"], answer: 0 },

{ q: "3x + 2 = 11 ‚Üí x = ?", choices: ["2","3","4","5"], answer: 1 },
{ q: "6¬≤ = ?", choices: ["12","24","36","48"], answer: 2 },
{ q: "‚àö64 = ?", choices: ["6","7","8","9"], answer: 2 },
{ q: "Aire carr√© c√¥t√© 9", choices: ["72","81","90","99"], answer: 1 },
{ q: "7 stylos = 14‚Ç¨, 2 stylos = ?", choices: ["2‚Ç¨","3‚Ç¨","4‚Ç¨","5‚Ç¨"], answer: 2 },

{ q: "4x = 20 ‚Üí x = ?", choices: ["4","5","6","7"], answer: 1 },
{ q: "7¬≥ = ?", choices: ["343","147","294","196"], answer: 0 },
{ q: "‚àö81 = ?", choices: ["8","9","10","11"], answer: 1 },
{ q: "Aire rectangle 12√ó4", choices: ["40","48","52","60"], answer: 1 },
{ q: "18/24 simplifi√© =", choices: ["3/4","2/3","4/5","5/6"], answer: 0 },

{ q: "5x = 25 ‚Üí x = ?", choices: ["3","4","5","6"], answer: 2 },
{ q: "8¬≤ = ?", choices: ["48","64","72","80"], answer: 1 },
{ q: "‚àö100 = ?", choices: ["8","9","10","12"], answer: 2 },
{ q: "Aire triangle base 12 hauteur 5", choices: ["20","25","30","35"], answer: 2 },
{ q: "9 stylos = 27‚Ç¨, 3 stylos = ?", choices: ["6‚Ç¨","7‚Ç¨","8‚Ç¨","9‚Ç¨"], answer: 3 },
{ q: "R√©soudre : 3x = 18", choices: ["4","5","6","7"], answer: 2 },
{ q: "5¬≤ ‚àí 3¬≤ = ?", choices: ["16","19","22","28"], answer: 0 },
{ q: "Simplifier 20/30", choices: ["2/3","3/4","4/5","5/6"], answer: 0 },
{ q: "Aire triangle base 12 hauteur 8 =", choices: ["48","72","96","120"], answer: 1 },
{ q: "7 stylos co√ªtent 21‚Ç¨, 1 stylo co√ªte ?", choices: ["2‚Ç¨","3‚Ç¨","4‚Ç¨","5‚Ç¨"], answer: 1 },
{ q: "‚àö121 = ?", choices: ["9","10","11","12"], answer: 2 },
{ q: "D√©velopper : 3(x + 4)", choices: ["3x+4","3x+12","x+12","12x"], answer: 1 },
],

"3e": [
{ q:"R√©soudre : 2x = 14", choices:["7","12","9"], answer:0 },
{ q:"Thal√®s s‚Äôapplique sur :", choices:["Triangles","Carr√©s","Cercles"], answer:0 },
{ q:"Pythagore : hypot√©nuse¬≤ =", choices:["a¬≤+b¬≤","a+b","ab"], answer:0 },
{ q:"(x+3)(x+2) =", choices:["x¬≤+5x+6","x¬≤+6","x¬≤+3x"], answer:0 },
{ q:"Racine carr√©e de 144 =", choices:["12","14","10"], answer:0 },
{ q: "R√©soudre : 2x = 10", choices: ["x=2","x=5","x=10","x=8"], answer: 1 },
{ q: "‚àö49 = ?", choices: ["6","7","8","9"], answer: 1 },
{ q: "Fonction affine : f(x)=2x+1 ‚Üí f(3) ?", choices: ["5","6","7","8"], answer: 2 },
{ q: "Aire triangle base 6 hauteur 4 =", choices: ["12","10","14","16"], answer: 0 },
{ q: "‚àí3 + 8 = ?", choices: ["3","5","6","4"], answer: 1 },
{ q: "2x = 10 ‚Üí x = ?", choices: ["4","5","6","7"], answer: 1 },
{ q: "‚àö121 = ?", choices: ["10","11","12","13"], answer: 1 },
{ q: "f(x)=2x+1 ‚Üí f(3) = ?", choices: ["5","6","7","8"], answer: 2 },
{ q: "Aire triangle base 8 hauteur 6", choices: ["20","24","28","30"], answer: 1 },
{ q: "‚àí5 + 9 = ?", choices: ["3","4","5","6"], answer: 1 },

{ q: "3x = 15 ‚Üí x = ?", choices: ["4","5","6","7"], answer: 1 },
{ q: "‚àö64 = ?", choices: ["6","7","8","9"], answer: 2 },
{ q: "f(x)=3x ‚Üí f(4) = ?", choices: ["10","12","14","16"], answer: 1 },
{ q: "Pythagore 6-8-?", choices: ["9","10","12","14"], answer: 1 },
{ q: "‚àí7 + 12 = ?", choices: ["3","4","5","6"], answer: 2 },

{ q: "4x = 20 ‚Üí x = ?", choices: ["3","4","5","6"], answer: 2 },
{ q: "‚àö144 = ?", choices: ["10","11","12","13"], answer: 2 },
{ q: "f(x)=x¬≤ ‚Üí f(5) = ?", choices: ["20","25","30","35"], answer: 1 },
{ q: "Aire cercle rayon 7 (‚âà)", choices: ["140","154","160","170"], answer: 1 },
{ q: "‚àí8 + 15 = ?", choices: ["5","6","7","8"], answer: 2 },

{ q: "5x = 25 ‚Üí x = ?", choices: ["3","4","5","6"], answer: 2 },
{ q: "‚àö169 = ?", choices: ["12","13","14","15"], answer: 1 },
{ q: "f(x)=x+3 ‚Üí f(4) = ?", choices: ["6","7","8","9"], answer: 2 },
{ q: "Pythagore 9-12-?", choices: ["14","15","16","18"], answer: 1 },
{ q: "‚àí10 + 18 = ?", choices: ["6","7","8","9"], answer: 2 },
{ q: "R√©soudre : 4x ‚àí 8 = 0", choices: ["1","2","3","4"], answer: 1 },
{ q: "f(x)=2x+3 ‚Üí f(5) ?", choices: ["10","11","13","15"], answer: 2 },
{ q: "Pythagore : c√¥t√©s 9 et 12 ‚Üí hypot√©nuse ?", choices: ["13","15","18","21"], answer: 1 },
{ q: "D√©velopper : (x+2)(x+3)", choices: ["x¬≤+5x+6","x¬≤+6","x¬≤+3x","x¬≤+2x+3"], answer: 0 },
{ q: "‚àö196 = ?", choices: ["12","13","14","15"], answer: 2 },
{ q: "‚àí6 + 14 = ?", choices: ["6","7","8","9"], answer: 2 },
{ q: "Aire d‚Äôun cercle de rayon 7 (‚âà)", choices: ["140","154","160","170"], answer: 1 },


],

"seconde": [
{ q:"f(x)=2x, f(3) =", choices:["6","5","9"], answer:0 },
{ q:"(-2)¬≥ =", choices:["-8","8","4"], answer:0 },
{ q:"3x = 15 ‚Üí x =", choices:["5","3","6"], answer:0 },
{ q:"Forme d√©velopp√©e : (x+4)¬≤ =", choices:["x¬≤+8x+16","x¬≤+16","x¬≤+4x"], answer:0 },
{ q: "2(x+3)=?", choices: ["2x+6","x+6","2x+3","x+3"], answer: 0 },
{ q: "x¬≤=16 ‚Üí x=?", choices: ["4","-4","4 et -4","0"], answer: 2 },
{ q: "Variation de f(x)=x¬≤ ?", choices: ["croissante","d√©croissante","d√©cro√Æt puis cro√Æt","constante"], answer: 2 },
{ q: "5√ó10¬≤ =", choices: ["500","50","1000","250"], answer: 0 },
{ q: "Pythagore : 3-4-?", choices: ["6","5","7","8"], answer: 1 },
{ q: "2(x+4)=?", choices: ["2x+8","x+8","2x+4","x+4"], answer: 0 },
{ q: "x¬≤ = 25 ‚Üí x = ?", choices: ["5","-5","5 et -5","0"], answer: 2 },
{ q: "f(x)=x¬≤ variation ?", choices: ["cro√Æt","d√©cro√Æt","‚Üì puis ‚Üë","constante"], answer: 2 },
{ q: "5√ó10¬≥ =", choices: ["500","5000","50","50000"], answer: 1 },
{ q: "Pythagore 5-12-?", choices: ["13","14","15","16"], answer: 0 },

{ q: "3(x+2)=?", choices: ["3x+6","3x+2","x+6","6x"], answer: 0 },
{ q: "x¬≤ = 49 ‚Üí x = ?", choices: ["7","-7","7 et -7","0"], answer: 2 },
{ q: "f(x)=2x+1 ‚Üí f(2) ?", choices: ["3","5","6","7"], answer: 1 },
{ q: "2√ó10¬≤ =", choices: ["20","200","2000","20000"], answer: 1 },
{ q: "Pythagore 9-12-?", choices: ["13","15","18","20"], answer: 1 },

{ q: "4(x‚àí3)=?", choices: ["4x‚àí12","4x‚àí3","x‚àí12","x‚àí3"], answer: 0 },
{ q: "x¬≤ = 16 ‚Üí x = ?", choices: ["4","-4","4 et -4","0"], answer: 2 },
{ q: "f(x)=3x ‚Üí f(5) ?", choices: ["12","15","18","20"], answer: 1 },
{ q: "6√ó10¬π =", choices: ["6","60","600","6000"], answer: 1 },
{ q: "Pythagore 8-15-?", choices: ["16","17","18","20"], answer: 1 },

{ q: "5(x+1)=?", choices: ["5x+5","5x+1","x+5","5"], answer: 0 },
{ q: "x¬≤ = 36 ‚Üí x = ?", choices: ["6","-6","6 et -6","0"], answer: 2 },
{ q: "f(x)=x¬≤ ‚Üí f(3) ?", choices: ["6","9","12","15"], answer: 1 },
{ q: "7√ó10¬≤ =", choices: ["70","700","7000","70000"], answer: 1 },
{ q: "Pythagore 12-16-?", choices: ["18","20","22","24"], answer: 1 },
{ q: "R√©soudre : x¬≤ = 25", choices: ["5","-5","5 et -5","0"], answer: 2 },
{ q: "D√©velopper : (x+5)¬≤", choices: ["x¬≤+10x+25","x¬≤+25","x¬≤+5x","x¬≤+20x+25"], answer: 0 },
{ q: "Variation de f(x)=x¬≤ ?", choices: ["croissante","d√©croissante","‚Üì puis ‚Üë","constante"], answer: 2 },
{ q: "5 √ó 10¬≥ =", choices: ["50","500","5000","50000"], answer: 2 },
{ q: "Pythagore : 12-16-?", choices: ["18","20","22","24"], answer: 1 },
{ q: "f(x)=3x‚àí2 ‚Üí f(4) ?", choices: ["8","10","12","14"], answer: 1 },

],

"premiere": [
{ q:"D√©riv√©e de x¬≤ =", choices:["2x","x","x¬≤"], answer:0 },
{ q:"lim x‚Üí0 sin(x)/x =", choices:["1","0","‚àû"], answer:0 },
{ q:"Probabilit√© max =", choices:["1","100","0.5"], answer:0 },
{ q:"Factoriser : x¬≤-9 =", choices:["(x-3)(x+3)","x(x-9)","x¬≤-3"], answer:0 },
{ q: "D√©riv√©e de x¬≤ ?", choices: ["2x","x","x¬≤","2"], answer: 0 },
{ q: "limite x‚Üí0 de x¬≤ ?", choices: ["0","1","‚àû","-1"], answer: 0 },
{ q: "Suite u(n)=2n ‚Üí u(5) ?", choices: ["10","8","12","15"], answer: 0 },
{ q: "Probabilit√© d‚Äôun √©v√©nement certain =", choices: ["0","0,5","1","2"], answer: 2 },
{ q: "Factoriser x¬≤-9 =", choices: ["(x-3)(x+3)","(x-9)","(x-3)¬≤","(x+9)"], answer: 0 },
{ q: "D√©riv√©e de x¬≤ ?", choices: ["2x","x","x¬≤","2"], answer: 0 },
{ q: "D√©riv√©e de 3x ?", choices: ["3","3x","x","6x"], answer: 0 },
{ q: "limite de x¬≤ quand x‚Üí0 ?", choices: ["0","1","‚àû","-1"], answer: 0 },
{ q: "limite de 1/x quand x‚Üí‚àû ?", choices: ["0","1","‚àû","-1"], answer: 0 },
{ q: "Factoriser x¬≤‚àí9", choices: ["(x‚àí3)(x+3)","(x‚àí9)","(x‚àí3)¬≤","(x+9)"], answer: 0 },

{ q: "D√©riv√©e de 4x¬≤ ?", choices: ["8x","4x","16x","2x"], answer: 0 },
{ q: "limite de x¬≥ quand x‚Üí‚àû ?", choices: ["0","+‚àû","-‚àû","1"], answer: 1 },
{ q: "u(n)=2n ‚Üí u(6) ?", choices: ["10","12","14","16"], answer: 1 },
{ q: "P(A)=1 signifie ?", choices: ["impossible","certain","possible","rare"], answer: 1 },
{ q: "Factoriser x¬≤‚àí16", choices: ["(x‚àí4)(x+4)","(x‚àí8)","(x‚àí4)¬≤","(x+16)"], answer: 0 },

{ q: "D√©riv√©e de sin(x) ?", choices: ["cos(x)","sin(x)","‚àísin(x)","‚àícos(x)"], answer: 0 },
{ q: "D√©riv√©e de 5x¬≥ ?", choices: ["15x¬≤","5x¬≤","10x","x¬≥"], answer: 0 },
{ q: "limite de 2x quand x‚Üí‚àû ?", choices: ["0","+‚àû","-‚àû","1"], answer: 1 },
{ q: "u(n)=3n+1 ‚Üí u(5) ?", choices: ["16","15","14","18"], answer: 0 },
{ q: "Probabilit√© max =", choices: ["0","0,5","1","2"], answer: 2 },

{ q: "D√©riv√©e de x¬≥ ?", choices: ["3x¬≤","x¬≤","x¬≥","2x"], answer: 0 },
{ q: "limite de 1/x¬≤ quand x‚Üí‚àû ?", choices: ["0","‚àû","1","-1"], answer: 0 },
{ q: "Suite u(n)=n¬≤ ‚Üí u(4) ?", choices: ["8","12","16","18"], answer: 2 },
{ q: "P(A)=0 signifie ?", choices: ["certain","impossible","probable","rare"], answer: 1 },
{ q: "Factoriser x¬≤+6x+9", choices: ["(x+3)¬≤","(x+9)","(x+3)(x+9)","x¬≤+9"], answer: 0 },

{ q: "D√©riv√©e de e^x ?", choices: ["e^x","xe^x","x","1"], answer: 0 },
{ q: "limite de x quand x‚Üí‚àí‚àû ?", choices: ["0","+‚àû","‚àí‚àû","1"], answer: 2 },
{ q: "u(n)=5n ‚Üí u(3) ?", choices: ["10","15","20","25"], answer: 1 },
{ q: "Une probabilit√© n√©gative est ?", choices: ["possible","impossible","rare","nulle"], answer: 1 },
{ q: "R√©soudre x¬≤=25", choices: ["5","-5","5 et -5","0"], answer: 2 },

{ q: "D√©riv√©e de ln(x) ?", choices: ["1/x","ln(x)","x","e^x"], answer: 0 },
{ q: "limite de ln(x) quand x‚Üí+‚àû ?", choices: ["+‚àû","0","1","‚àí‚àû"], answer: 0 },
{ q: "u(n)=2n+3 ‚Üí u(4) ?", choices: ["9","11","13","15"], answer: 1 },
{ q: "P(A‚à™B) ‚â§ ?", choices: ["P(A)+P(B)","P(A)√óP(B)","1‚àíP(A)","0"], answer: 0 },
{ q: "Factoriser x¬≤‚àí25", choices: ["(x‚àí5)(x+5)","(x‚àí25)","(x‚àí5)¬≤","(x+25)"], answer: 0 },

{ q: "D√©riv√©e de cos(x) ?", choices: ["‚àísin(x)","sin(x)","cos(x)","tan(x)"], answer: 0 },
{ q: "limite de 3x¬≤ quand x‚Üí‚àí‚àû ?", choices: ["+‚àû","‚àí‚àû","0","1"], answer: 0 },
{ q: "u(n)=n¬≤+1 ‚Üí u(3) ?", choices: ["8","9","10","11"], answer: 1 },
{ q: "P(A‚à©B) = ?", choices: ["P(A)√óP(B)","P(A)+P(B)","P(A)‚àíP(B)","1"], answer: 0 },
{ q: "R√©soudre x¬≤‚àí4x=0", choices: ["x=0 ou 4","x=2","x=‚àí2","aucune"], answer: 0 },

{ q: "D√©riv√©e de x‚Å¥ ?", choices: ["4x¬≥","x¬≥","x‚Å¥","3x¬≤"], answer: 0 },
{ q: "limite de 1/x quand x‚Üí0 ?", choices: ["‚àû","0","1","‚àí1"], answer: 0 },
{ q: "u(n)=4n‚àí2 ‚Üí u(5) ?", choices: ["18","20","22","24"], answer: 0 },
{ q: "Somme des probabilit√©s =", choices: ["0","0,5","1","2"], answer: 2 },
{ q: "R√©soudre x(x‚àí3)=0", choices: ["x=0 ou 3","x=3","x=0","aucune"], answer: 0 },
{ q: "D√©riv√©e de 4x¬≥ =", choices: ["12x¬≤","4x¬≤","16x","3x¬≤"], answer: 0 },
{ q: "limite de 1/x quand x‚Üí+‚àû ?", choices: ["0","+‚àû","‚àí‚àû","1"], answer: 0 },
{ q: "u(n)=3n+2 ‚Üí u(5) ?", choices: ["15","17","19","20"], answer: 1 },
{ q: "Factoriser x¬≤+6x+9", choices: ["(x+3)¬≤","(x+9)","x(x+6)","(x+3)(x+9)"], answer: 0 },
{ q: "Probabilit√© max =", choices: ["0","0,5","1","2"], answer: 2 },


],

"terminale": [
{ q:"Int√©grale de 2x =", choices:["x¬≤ + C","2x¬≤","x"], answer:0 },
{ q:"ln(e¬≥) =", choices:["3","e","ln3"], answer:0 },
{ q:"Suite arithm√©tique raison 2, u‚ÇÄ=3, u‚ÇÅ =", choices:["5","4","6"], answer:0 },
{ q:"D√©riv√©e de ln(x) =", choices:["1/x","ln(x)","x"], answer:0 },
{ q: "Primitive de 2x ?", choices: ["x¬≤","2x¬≤","x","2"], answer: 0 },
{ q: "limite x‚Üí‚àû de 1/x ?", choices: ["0","1","‚àû","-1"], answer: 0 },
{ q: "R√©soudre ln(x)=0", choices: ["0","1","e","-1"], answer: 1 },
{ q: "z = i¬≤ =", choices: ["-1","1","i","0"], answer: 0 },
{ q: "D√©riv√©e de sin(x) ?", choices: ["cos(x)","sin(x)","-cos(x)","-sin(x)"], answer: 0 },
{ q: "Primitive de 2x ?", choices: ["x¬≤","2x¬≤","x","2"], answer: 0 },
{ q: "D√©riv√©e de sin(x) ?", choices: ["cos(x)","sin(x)","‚àísin(x)","‚àícos(x)"], answer: 0 },
{ q: "limite de 1/x quand x‚Üí‚àû ?", choices: ["0","‚àû","1","‚àí1"], answer: 0 },
{ q: "R√©soudre ln(x)=0", choices: ["1","0","e","‚àí1"], answer: 0 },
{ q: "i¬≤ =", choices: ["‚àí1","1","i","0"], answer: 0 },

{ q: "Primitive de 3x¬≤ ?", choices: ["x¬≥","3x¬≥","x¬≤","6x"], answer: 0 },
{ q: "D√©riv√©e de e^x ?", choices: ["e^x","xe^x","x","1"], answer: 0 },
{ q: "limite de x¬≤ quand x‚Üí‚àû ?", choices: ["+‚àû","0","1","‚àí‚àû"], answer: 0 },
{ q: "R√©soudre e^x = 1", choices: ["0","1","‚àí1","‚àû"], answer: 0 },
{ q: "|3i| =", choices: ["1","2","3","4"], answer: 2 },

{ q: "Primitive de cos(x) ?", choices: ["sin(x)","cos(x)","‚àísin(x)","‚àícos(x)"], answer: 0 },
{ q: "D√©riv√©e de ln(x) ?", choices: ["1/x","ln(x)","x","e^x"], answer: 0 },
{ q: "limite de sin(x)/x quand x‚Üí0", choices: ["0","1","‚àû","‚àí1"], answer: 1 },
{ q: "R√©soudre x¬≤ = 9", choices: ["3","-3","3 et -3","0"], answer: 2 },
{ q: "Argument de i =", choices: ["0","œÄ/2","œÄ","‚àíœÄ"], answer: 1 },

{ q: "Primitive de x¬≥ ?", choices: ["x‚Å¥/4","3x¬≤","x¬≤","4x¬≥"], answer: 0 },
{ q: "D√©riv√©e de x¬≥ ?", choices: ["3x¬≤","x¬≤","x¬≥","2x"], answer: 0 },
{ q: "limite de e^x quand x‚Üí‚àû ?", choices: ["+‚àû","0","1","‚àí‚àû"], answer: 0 },
{ q: "R√©soudre ln(x)=1", choices: ["e","1","0","‚àí1"], answer: 0 },
{ q: "z = 2+3i ‚Üí |z| =", choices: ["3","‚àö13","5","‚àö9"], answer: 1 },

{ q: "Primitive de 1/x ?", choices: ["ln|x|","1/x¬≤","x","e^x"], answer: 0 },
{ q: "D√©riv√©e de cos(x) ?", choices: ["‚àísin(x)","sin(x)","cos(x)","tan(x)"], answer: 0 },
{ q: "limite de 1/x¬≤ quand x‚Üí‚àû ?", choices: ["0","‚àû","1","‚àí1"], answer: 0 },
{ q: "R√©soudre e^x = e¬≤", choices: ["2","e","0","‚àí2"], answer: 0 },
{ q: "i¬≥ =", choices: ["‚àíi","i","‚àí1","1"], answer: 0 },

{ q: "Primitive de 4x¬≥ ?", choices: ["x‚Å¥","x‚Å¥","2x¬≤","x¬≥"], answer: 0 },
{ q: "D√©riv√©e de tan(x) ?", choices: ["1+tan¬≤(x)","cos(x)","sin(x)","‚àítan(x)"], answer: 0 },
{ q: "limite de ln(x) quand x‚Üí‚àû ?", choices: ["+‚àû","0","1","‚àí‚àû"], answer: 0 },
{ q: "R√©soudre ln(x)=2", choices: ["e¬≤","2","e","0"], answer: 0 },
{ q: "z = 1‚àíi ‚Üí |z| =", choices: ["1","‚àö2","2","‚àö3"], answer: 1 },

{ q: "Primitive de sin(x) ?", choices: ["‚àícos(x)","cos(x)","sin(x)","‚àísin(x)"], answer: 0 },
{ q: "D√©riv√©e de x‚Å¥ ?", choices: ["4x¬≥","x¬≥","x‚Å¥","3x¬≤"], answer: 0 },
{ q: "limite de 1/x quand x‚Üí0", choices: ["‚àû","0","1","‚àí1"], answer: 0 },
{ q: "R√©soudre e^x = e¬≥", choices: ["3","e","0","‚àí3"], answer: 0 },
{ q: "i‚Å¥ =", choices: ["1","‚àí1","i","0"], answer: 0 },
{ q: "Quel nombre est le plus proche de 300 ?", choices: ["289","301","275","315"], answer: 1 },
{ q: "7 √ó 4 + 3 = ?", choices: ["31","28","25","35"], answer: 0 },
{ q: "Un nombre est pair et compris entre 40 et 50. Lequel ?", choices: ["43","46","49","51"], answer: 1 },
{ q: "3/4 de 20 = ?", choices: ["10","12","15","18"], answer: 2 },
{ q: "Si 5 cahiers co√ªtent 10‚Ç¨, 1 cahier co√ªte ?", choices: ["1‚Ç¨","2‚Ç¨","3‚Ç¨","4‚Ç¨"], answer: 1 },
{ q: "Quel est le multiple de 6 ?", choices: ["14","18","21","25"], answer: 1 },
{ q: "35 √∑ 5 + 2 = ?", choices: ["9","8","7","10"], answer: 0 },
{ q: "Primitive de 6x =", choices: ["3x¬≤","6x¬≤","x¬≤","12x"], answer: 0 },
{ q: "limite de e^x quand x‚Üí+‚àû ?", choices: ["0","+‚àû","‚àí‚àû","1"], answer: 1 },
{ q: "z = 3 + 4i ‚Üí |z| ?", choices: ["4","5","6","7"], answer: 1 },
{ q: "R√©soudre ln(x)=2", choices: ["e¬≤","2","e","0"], answer: 0 },
{ q: "D√©riv√©e de ln(x) ?", choices: ["1/x","ln(x)","x","e^x"], answer: 0 },


],

};


// =====================
// LOGIQUE QCM
// =====================

let questions = [];
let current = 0;
let score = 0;
let selected = null;
let examMode = false;
let timerInterval;
let timeLeft = 0;

const quizDiv = document.getElementById("quiz");
const nextBtn = document.getElementById("nextBtn");
const resultDiv = document.getElementById("result");
const timerDiv = document.getElementById("timer");
const examBtn = document.getElementById("examBtn");
const levelSelect = document.getElementById("levelSelect");

levelSelect.addEventListener("change", () => {
  const level = levelSelect.value;
  if (!level) return;

  examBtn.style.display = ["3e","premiere","terminale"].includes(level) 
    ? "block" : "none";

  startSession(level, false);
});

examBtn.onclick = () => {
  const level = levelSelect.value;
  if (!level) return;
  startSession(level, true);
};

function startSession(level, isExam) {
  examMode = isExam;
  const count = isExam ? 20 : 10;

  questions = [...banks[level]].sort(() => Math.random() - 0.5).slice(0, count);

  current = 0;
  score = 0;
  selected = null;

  resultDiv.innerHTML = "";
  nextBtn.style.display = "block";

  if (examMode) startTimer(3 * 60);
  else stopTimer();

  loadQuestion();
}

function startTimer(seconds) {
  clearInterval(timerInterval);
  timeLeft = seconds;
  timerDiv.innerHTML = formatTime(timeLeft);

  timerInterval = setInterval(() => {
    timeLeft--;
    timerDiv.innerHTML = "‚è± " + formatTime(timeLeft);
    if (timeLeft <= 0) finishQuiz();
  }, 1000);
}

function stopTimer() {
  clearInterval(timerInterval);
  timerDiv.innerHTML = "";
}

function formatTime(sec) {
  let m = Math.floor(sec / 60);
  let s = sec % 60;
  return `${m}:${s < 10 ? "0" : ""}${s}`;
}

function loadQuestion() {
  selected = null;
  const q = questions[current];

  quizDiv.innerHTML = `
    <h3>Question ${current + 1} / ${questions.length}</h3>
    <div>${q.q}</div>
    ${q.choices.map((c,i) =>
      `<div class="choice" onclick="selectChoice(this,${i})">${c}</div>`
    ).join("")}
  `;
}

window.selectChoice = function(el,index){
  document.querySelectorAll(".choice").forEach(c=>c.classList.remove("selected"));
  el.classList.add("selected");
  selected = index;
}

nextBtn.onclick = () => {
  if (selected === null) return alert("Choisis une r√©ponse");

  if (selected === questions[current].answer) score++;

  current++;
  if (current < questions.length) loadQuestion();
  else finishQuiz();
};

async function finishQuiz() {
  stopTimer();
  quizDiv.innerHTML = "";
  nextBtn.style.display = "none";

  const percent = Math.round((score / questions.length) * 100);
  const name = document.getElementById("studentName").value || "√âl√®ve";

  await addDoc(collection(db, "qcmScores"), {
    name,
    classe: levelSelect.value,
    score,
    total: questions.length,
    date: new Date()
  });

  resultDiv.innerHTML = `
    <strong>Score : ${score}/${questions.length} (${percent}%)</strong><br><br>
    üëâ <a href="reservation.html" style="color:#c9a24d;font-weight:bold;">
      R√©server un professeur G-Cours
    </a>
  `;
}


// =====================
// HISTORIQUE SCORES
// =====================

window.loadMyScores = async function(){
  const name = document.getElementById("studentName").value;
  if (!name) return alert("Entre ton nom");

  const q = query(
    collection(db, "qcmScores"),
    where("name","==",name)
  );

  const snapshot = await getDocs(q);
  const history = document.getElementById("history");
  history.innerHTML = "";

 snapshot.forEach(docSnap => {
  const s = docSnap.data();
  const docId = docSnap.id;

  html += `
    <tr>
      <td style="padding:8px;border-bottom:1px solid #ddd;">
        ${new Date(s.date.seconds*1000).toLocaleString()}
      </td>
      <td style="padding:8px;border-bottom:1px solid #ddd;">${s.name}</td>
      <td style="padding:8px;border-bottom:1px solid #ddd;">${s.classe}</td>
      <td style="padding:8px;border-bottom:1px solid #ddd;">${s.score}/${s.total}</td>
      <td style="padding:8px;border-bottom:1px solid #ddd;">
        ${Math.round((s.score/s.total)*100)}%
      </td>
      <td style="padding:8px;border-bottom:1px solid #ddd;text-align:center;">
        <button onclick="deleteScore('${docId}')" 
          style="padding:6px 12px;border-radius:6px;background:#c0392b;color:white;border:none;cursor:pointer;">
          Supprimer
        </button>
      </td>
    </tr>
  `;
});

}
// ================================
// üîê ACC√àS PROF ‚Äî SCORES QCM
// ================================

// Mot de passe prof crypt√© Base64
const P = atob("MjgwNQ=="); 

function saveScore(level, score, total) {
  let history = JSON.parse(localStorage.getItem("qcmHistory") || "[]");

  history.push({
    name: document.getElementById("studentName").value || "√âl√®ve",
    level,
    score,
    total,
    percent: Math.round((score / total) * 100),
    date: new Date().toLocaleString()
  });

  localStorage.setItem("qcmHistory", JSON.stringify(history));
}

// Patch finishQuiz pour sauvegarder score
const oldFinishQuiz = finishQuiz;
finishQuiz = async function() {
  await oldFinishQuiz();
  saveScore(levelSelect.value, score, questions.length);
};


// Connexion Prof
window.openProf = async function () {
  const pass = prompt("Mot de passe Prof");
  if (pass !== atob("MjgwNQ==")) return alert("Acc√®s refus√©");

  const panel = document.getElementById("profPanel");

  // R√©cup√©rer tous les scores depuis Firebase
  const snapshot = await getDocs(collection(db, "qcmScores"));

  if (snapshot.empty) {
    panel.innerHTML = "<p>Aucun r√©sultat enregistr√©.</p>";
    return;
  }

  let html = `
  <h3>üìä R√©sultats QCM</h3>
  <table style="width:100%;border-collapse:collapse;margin-top:15px;">
    <tr style="background:#0b1c2d;color:white;">
      <th>Date</th>
      <th>Nom</th>
      <th>Classe</th>
      <th>Score</th>
      <th>%</th>
      <th>Action</th>
    </tr>
`;


  snapshot.forEach(doc => {
    const s = doc.data();
    html += `
  <tr>
    <td style="padding:8px;border-bottom:1px solid #ddd;">
      ${new Date(s.date.seconds*1000).toLocaleString()}
    </td>
    <td style="padding:8px;border-bottom:1px solid #ddd;">${s.name}</td>
    <td style="padding:8px;border-bottom:1px solid #ddd;">${s.classe}</td>
    <td style="padding:8px;border-bottom:1px solid #ddd;">${s.score}/${s.total}</td>
    <td style="padding:8px;border-bottom:1px solid #ddd;">
      ${Math.round((s.score/s.total)*100)}%
    </td>
    <td style="padding:8px;border-bottom:1px solid #ddd;text-align:center;">
      <button onclick="deleteScore('${doc.id}')"
        style="padding:6px 12px;border-radius:6px;
        background:#c0392b;color:white;border:none;cursor:pointer;">
        Supprimer
      </button>
    </td>
  </tr>
`;

  });

  html += "</table>";
  panel.innerHTML = html;
};



window.deleteScore = async function(id) {
  const confirmDelete = confirm("Supprimer ce r√©sultat ?");
  if (!confirmDelete) return;

  await deleteDoc(doc(db, "qcmScores", id));

  alert("R√©sultat supprim√© !");
  openProf();
};

</script>

</body>
</html>
